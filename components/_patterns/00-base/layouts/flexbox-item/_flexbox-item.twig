{# A grid-item uses this class along with the blockname whenever it is an element (BEM)#}
{% set flexbox_item_base_class = 'item' %}
{% set flexbox_item_blockname = flexbox_item_blockname|default('flexbox') %}
{# This var is set to prevent add_attributes griping about an empty var #}
{% set flexbox_item_attributes = flexbox_item_attributes|default([]) %}

<div
  {{ bem(flexbox_item_base_class, (flexbox_item_modifiers), flexbox_item_blockname) }}
  {{ add_attributes(flexbox_item_attributes) }}
>
  {% block grid_item_block %}

    {# Image #}
    {%- if flexbox_item.img_attributes -%}
      {%- include "@atoms/04-images/00-image/00-image.twig" with {
        "img_attributes": flexbox_item.img_attributes,
        "img_blockname": card_base_class,
      } -%}
    {%- endif -%}
    {# End Image #}

    {# Title #}
    {%- if flexbox_item.title -%}
      {%- if flexbox_item.link_attributes -%}
        {%- embed "@atoms/01-links/link/link.twig" with {
          "link_attributes": flexbox_item.link_attributes,
          "link_modifiers": flexbox_item.link_modifiers,
          "link_blockname": card_base_class,
        } -%}
          {%- block link_content -%}
            {%- include "@atoms/03-text/01-heading/_heading.twig" with {
              "heading_level": 2,
              "heading_content": flexbox_item.title,
              "heading_modifiers": flexbox_item.modifiers,
              "heading_blockname": card_base_class,
            } -%}
          {%- endblock -%}
        {%- endembed -%}
      {%- else -%}
        {%- include "@atoms/03-text/01-heading/_heading.twig" with {
          "heading_level": 2,
          "heading_content": flexbox_item.title,
          "heading_modifiers": flexbox_item.modifiers,
          "heading_blockname": card_base_class,
        } -%}
      {%- endif -%}
    {%- endif -%}
    {# End Title #}

    {# Subtitle #}
    {%- if flexbox_item.subtitle -%}
      {%- if flexbox_item.link_attributes -%}
        {%- embed "@atoms/01-links/link/link.twig" with {
          "link_attributes": flexbox_item.link_attributes,
          "link_modifiers": flexbox_item.link_modifiers,
          "link_blockname": card_base_class,
        } -%}
          {%- block link_content -%}
            {%- include "@atoms/03-text/01-heading/_heading.twig" with {
              "heading_level": 3,
              "heading_content": flexbox_item.subtitle,
              "heading_modifiers": flexbox_item.modifiers,
              "heading_blockname": card_base_class,
            } -%}
          {%- endblock -%}
        {%- endembed -%}
      {%- else -%}
        {%- include "@atoms/03-text/01-heading/_heading.twig" with {
          "heading_level": 3,
          "heading_content": flexbox_item.subtitle,
          "heading_modifiers": flexbox_item.modifiers,
          "heading_blockname": card_base_class,
        } -%}
      {%- endif -%}
    {%- endif -%}
    {# End Title #}

    {# Body #}
    {%- if flexbox_item.body -%}
      {%- include "@atoms/03-text/02-paragraph/paragraph.twig" with {
        "paragraph_content": flexbox_item.body,
        "paragraph_modifiers": flexbox_item.modifiers,
        "paragraph_blockname": card_base_class,
      } -%}
    {%- endif -%}
    {# End Body #}

    {# Button #}
    {%- if flexbox_item.button_attributes -%}
      {%- include "@atoms/02-form_elements/01-button/00-button.twig" with {
        "button_content": flexbox_item.button,
        "button_attributes": flexbox_item.button_attributes,
        "button_modifiers": flexbox_item.modifiers,
        "button_blockname": card_base_class,
      } -%}
    {%- endif -%}
    {# End Button #}

    {# Link #}
    {%- if flexbox_item.link_attributes -%}
      {%- include "@atoms/01-links/link/link.twig" with {
        "link_content": flexbox_item.link,
        "link_attributes": flexbox_item.link_attributes,
        "link_modifiers": flexbox_item.link_modifiers,
        "link_blockname": card_base_class,
      } -%}
    {%- endif -%}
    {# End Link #}

  {% endblock %}
</div>
